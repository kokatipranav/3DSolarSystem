<h1>Solar System Orrery</h1>

  <head>
    <!-- See http://docs.mathjax.org/en/latest/web/start.html#using-mathjax-from-a-content-delivery-network-cdn -->
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
  </head>
  <center>
This is a solar system orrery based on mathematical formulas and the NASA Near Earth Comets API. The planets are displayed by using their heliocentric coordinates (x, y, z). The animation is created by moving frames of plotted planets. 
To calculate the planet positions, the formulas from the excellent Astronomy Answers website was used: <a href="https://aa.quae.nl/en/reken/hemelpositie.html">Sun Position Answers</a>. <br>

In astronomy, Julian Dates are frequently used. To calculate the Julian date, we borrowed code from this tutorial: <a href="https://jasonsturges.medium.com/moons-lunar-phase-in-javascript-a5219acbfe6e">Moon's Lunar Phase</a>. <br>
    
Each planet has a mean anomaly, which indicates its position in its orbit. With the Julian Date calculated earlier, the mean anomaly can be gotten. The mean anomaly can be calculated as:
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
  <mtable displaystyle="true">
    <mlabeledtr>
      <mtd id="mjx-eqn-5">
        <mtext>(5)</mtext>
      </mtd>
      <mtd>
        <mi>M</mi>
        <mo>=</mo>
        <msub>
          <mi>M</mi>
          <mn>0</mn>
        </msub>
        <mo>+</mo>
        <mi>n</mi>
        <mo stretchy="false">(</mo>
        <mi>d</mi>
        <mo>&#x2212;</mo>
        <msub>
          <mi>d</mi>
          <mn>0</mn>
        </msub>
        <mo stretchy="false">)</mo>
      </mtd>
    </mlabeledtr>
  </mtable>
</math>

  More information about the calculation of the mean anomaly can be gotten on step 2 of <a href="https://www.aa.quae.nl/en/reken/zonpositie.html">Solar Position</a> <br>
  After obtaining the mean anomaly, the simulation calculates the equation of center (a corrective coefficient for the mean anomaly), and adds it to the mean anomaly of the planet to obtain the <i>true anomaly</i>, which is a more accurate measure. More information about calculating the equation of center and obtaining the true anomaly can be gotten from steps 2-3 in <a href="https://www.aa.quae.nl/en/reken/zonpositie.html">.
  <br>
With the mean anomaly and some coefficients that can be gotten from tables 1 and 2 in this page: <a href="https://www.aa.quae.nl/en/reken/hemelpositie.html">Positions in the Sky</a>, the distance to the sun (from the planet) can be calculated via this formula:
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
  <mtable displaystyle="true">
    <mlabeledtr>
      <mtd id="mjx-eqn-6">
        <mtext>(6)</mtext>
      </mtd>
      <mtd>
        <mi>r</mi>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>a</mi>
            <mo stretchy="false">(</mo>
            <mn>1</mn>
            <mo>&#x2212;</mo>
            <msup>
              <mi>e</mi>
              <mn>2</mn>
            </msup>
            <mo stretchy="false">)</mo>
          </mrow>
          <mrow>
            <mn>1</mn>
            <mo>+</mo>
            <mi>e</mi>
            <mi>cos</mi>
            <mo data-mjx-texclass="NONE">&#x2061;</mo>
            <mrow>
              <mo>&#x3BD;</mo>
            </mrow>
          </mrow>
        </mfrac>
      </mtd>
    </mlabeledtr>
  </mtable>
</math>

  
</center>
</html>
